"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Rating=void 0;class Rating{constructor(t){this.starsClass=".Rating__star",this.inputId="input",this.activeBtnClassName="Rating__star--active",this.data=[],this.item=t,this.name=this.item.dataset.name||"",this.stars=this.item.querySelectorAll(this.starsClass),this.input=this.item.querySelector(`[data-id="${this.inputId}"]`),this._handle()}_handle(){try{this._checkForUser(),this.input.onchange=this._changeHandler.bind(this),this._setClickHandler(),this._getAllData(),this._init()}catch(t){console.warn(t.message)}}_init(){if(""!==this._getInputValue())for(let t of this.stars)t.dataset.value===this._getInputValue()&&t.dispatchEvent(new Event("click"))}_getAllData(){for(let t of this.stars)this.data.unshift(t.dataset.value)}_changeHandler(){let t=parseInt(this._getInputValue())-1;this._setActiveBtn([...this.stars].reverse()[t])}_setClickHandler(){for(let t of this.stars)t.onclick=this._clickHandler.bind(this,t)}_clickHandler({dataset:t}){this._setInputValue(t.value)}_getInputValue(){return this.input.value}_setInputValue(t){this.input.value=t,this.input.dispatchEvent(new Event("change"))}_setActiveBtn(t){this._removeAllActives(),t.classList.add(this.activeBtnClassName)}_removeAllActives(){for(let t of this.stars)t.classList.remove(this.activeBtnClassName)}_checkForUser(){if(null===this.item)throw new Error(`Component's '${this.name}' item is null!`);for(let t of this.stars)if(void 0===t.dataset.value)throw new Error(`Component's '${this.name}' button's 'data-value' attribute is undefined!`);if(null===this.input)throw new Error(`Component's '${this.name}' input is null!`);console.info(`Component '${this.name}' is ready.`)}}exports.Rating=Rating,exports.default=Rating;